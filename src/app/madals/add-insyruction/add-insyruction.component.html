<section>
    <div class="btn-close" (click)="close()" aria-label="–ó–∞–∫—Ä–∏—Ç–∏"></div>

    <div class="input_conteiner">

        <div class="table_block">
            <div class="tbale">
                @for(steps of instructions; track steps; let i = $index){
                <h2 class="group_name">{{steps.groupName}}</h2>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th scope="col">‚Ññ</th>
                            <th scope="col">–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</th>
                            <th scope="col">–ö—Ä–æ–∫–∏</th>
                            <th scope="col">–î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody>

                        @for(group of steps.group; track group; let j = $index){
                        <ng-container class="ing_block">

                            <tr class="steps_line">
                                <td class="btn_tr">
                                    <div class="action up" (click)="moveSteptUp(i, j)" title="–ü–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –≤–≥–æ—Ä—É"></div>
                                    <div class="action down" (click)="moveStepDown(i, j)" title="–ü–µ—Ä–µ–º—ñ—Å—Ç–∏—Ç–∏ –≤–Ω–∏–∑">
                                    </div>
                                </td>
                                <td>{{ j + 1 }}</td>
                                <td class="image">
                                    <img [src]="group.stepImage">
                                </td>
                                <td>
                                    <h3 [innerHTML]="group.stepName"></h3>
                                    <!--       <br>
                                    <p [innerHTML]="group.description"></p> -->
                                </td>
                                <td class="btn_tr">
                                    <div class="action edit" (click)="editStep(i, j)" title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏"></div>
                                    <div class="action dell" (click)="delStep(i, j)" title="–í–∏–¥–∞–ª–∏—Ç–∏"></div>
                                </td>

                            </tr>
                        </ng-container>
                        }
                    </tbody>
                </table>

                }
            </div>

        </div>


        <div class="add_instructions">
            <div class="top_block">
                <button class="btn" (click)="addGroup()">–î–æ–¥–∞—Ç–∏ –≥—Ä—É–ø—É</button>
                <button class="btn" (click)="save()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                <button class="btn" (click)="test()">–¢–µ—Å—Ç</button>
            </div>

            <div class="add_step_block">
                <div class="fom_block">
                    @for(steps of instructions; track steps; let i = $index){
                    <div class="instruction_block">
                        <div class="del_group" (click)="delGroup(i)" aria-label="–í–∏–¥–∞–ª–∏—Ç–∏ –≥—Ä—É–ø—É"></div>

                        <div class="name_group">
                            <label for="nameStepsGroup">–ù–∞–∑–≤–∞ –≥—Ä—É–ø–∏ </label>
                            <input type="text" [(ngModel)]="steps.groupName" name="nameStepsGroup"
                                placeholder="–ù–∞–∑–≤–∞ –≥—Ä—É–ø–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π">
                        </div>

                        <form [formGroup]="stepForm" (ngSubmit)="addStep(i)" class="instruction">
                            <div class="image_block">
                                <div *ngIf="stepImage" class="image">
                                    <img src="{{stepImage}}" alt="">
                                </div>

                                <input #fileInput type="file" style="display: none;" (change)="uploadStepImage($event)"
                                    accept="image/*" />
                                <button class="overlay btn" type="button"
                                    (click)="fileInput.click()">–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</button>
                            </div>

                            <div class="content_step">

                                <input formControlName="stepName" type="text" name="stepName" class="form-control"
                                    placeholder="*–í–≤–µ–¥—ñ—å –Ω–∞–∑–≤—É –∫—Ä–æ–∫–∞">
                                <div class="step_area">

                                    <div class="form-group">
                                        <label>–ö–æ—Ä–æ—Ç–∫–∏ –∫—Ä–æ–∫</label>
                                        <editor class="form-control"
                                            apiKey="1uomiyk9g2yxiild52n2wb54b7izjzi75n8vwjkx5jlikh6n"
                                            [init]="{ plugins: 'lists link image table code help wordcount' }"
                                            [inline]="false" formControlName="description"
                                            toolbar="bold italic underline | formatpainter | aligncenter alignleft alignright alignjustify | selectall | ltr rtl | code | help">
                                        </editor>
                                    </div>
                                    <div class="form-group">
                                        <label>–î–æ–∫–ª–∞–¥–Ω–∏–π –æ–ø–∏—Å –∫—Ä–æ–∫—É (–¥–ª—è —á–∞–π–Ω–∏–∫—ñ–≤ ü§ì)</label>
                                        <editor class="form-control"
                                            apiKey="1uomiyk9g2yxiild52n2wb54b7izjzi75n8vwjkx5jlikh6n"
                                            [init]="{ plugins: 'lists link image table code help wordcount' }"
                                            [inline]="false" formControlName="fullDescription"
                                            toolbar="bold italic underline | formatpainter | aligncenter alignleft alignright alignjustify | selectall | ltr rtl | code | help">
                                        </editor>
                                    </div>
                                </div>
                            </div>


                            <button type="submit" class="btn">
                                {{ !edit_status ? "–î–æ–¥–∞—Ç–∏ –∫—Ä–æ–∫" :  "–ó–±–µ—Ä–µ–≥—Ç–∏" }}</button>
                        </form>

                    </div>
                    }
                </div>

            </div>
        </div>
    </div>

</section>